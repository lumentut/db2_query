<%- indent = module? ? '  ' : '' -%>
# frozen_string_literal: true

<%= "module #{@module_name.camelize}\n" if module? -%>
<%= "#{indent}class #{class_name} < Db2Query::Base" -%>
<% if @query_methods.empty? %>
  <%= indent %>query :to_do, <<-SQL
  <%= indent %>
  <%= indent %>SQL

  <%= indent %>def to_do_sql
  <%= indent %>
  <%= indent %>end
  <%- end -%>
<% @method_options.each do |key, val| -%>
<% val.each_with_index do |option, index| -%>
<% case key when 'defines' -%> 
  <%= "#{indent}def #{option}_sql" %>
    <%= indent %>
  <%= indent %>end
<% when 'queries' %>
  <%= "#{indent}query :#{option}, <<-SQL" %>
    <%= indent %>
  <%= indent %>SQL
<% when 'lambdas' %>
  <%= "#{indent}query :#{option}, -> args {" %>
    <%= indent %>
  <%= indent %>}
<% end -%>
<% end -%>
<% end -%>
<%= indent %>end
<%= 'end' if module? %>